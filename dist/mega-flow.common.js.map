{"version":3,"file":"mega-flow.common.js","sources":["../src/components/Form/Field.js","../src/helpers/conditions.js","../src/components/Form/FormRows.js","../src/components/Form/Form.js","../src/theme/icons.js","../src/props.js","../src/index.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Controller, useFormContext } from \"react-hook-form\";\nimport {\n  BorderedRadio,\n  Checkbox,\n  FormDatepicker,\n  FilePond,\n  FileUpload,\n  Input,\n  PriceField,\n  Radio,\n  ReactSelect,\n  Select,\n  Stepper,\n  TextArea,\n  TextButton,\n  ToggleSwitch,\n  H6,\n  Image,\n  Icon,\n  Text,\n  Modal,\n  ItemSelect,\n} from \"@licenserocks/kit\";\nimport styled, { css } from \"styled-components\";\nimport Masonry from \"react-masonry-css\";\n\nconst mapFieldTypeToComponent = (fieldType) => {\n  switch (fieldType) {\n    case \"datepicker\":\n      return FormDatepicker;\n    case \"select\":\n      return Select;\n    case \"borderedRadio\":\n      return BorderedRadio;\n    case \"checkbox\":\n      return Checkbox;\n    case \"radio\":\n      return Radio;\n    case \"toggleSwitch\":\n      return ToggleSwitch;\n    case \"fileUpload\":\n      return FileUpload;\n    case \"filePond\":\n      return FilePond;\n    case \"price\":\n      return PriceField;\n    case \"reactSelect\":\n      return ReactSelect;\n    case \"stepper\":\n      return Stepper;\n    case \"textArea\":\n      return TextArea;\n    case \"itemSelect\":\n      return ItemSelect;\n    default:\n      return Input;\n  }\n};\n\nexport const FormField = ({\n  data,\n  field,\n  hasError,\n  isRecurring,\n  recurringIndex,\n  stepIndex,\n  fieldId,\n  rowId,\n  stepData,\n  merchandise,\n}) => {\n  const { control, setValue, register, watch } = useFormContext();\n  const { conditions, defaultValue, name, required, type, options, ...others } =\n    field;\n\n  if (type === \"link\") return <TextButton {...others} />;\n\n  const Field = mapFieldTypeToComponent(type);\n  const fieldKey = `step-${stepIndex}-row-${rowId}-field-${fieldId}`;\n  const fieldName = isRecurring\n    ? `${data.name}[${recurringIndex}].${name}`\n    : name;\n\n  const prevValue =\n    isRecurring && stepData[data.name] && stepData[data.name][recurringIndex]\n      ? stepData[data.name][recurringIndex][name]\n      : stepData[name];\n\n  if (field?.currencies !== undefined) {\n    field.currencies = stepData?.currencies;\n  }\n\n  return (\n    <Field\n      control={control}\n      defaultValue={prevValue || defaultValue}\n      hasError={hasError}\n      isRequired={required}\n      key={fieldKey}\n      name={fieldName}\n      register={register({\n        required,\n      })}\n      setValue={setValue}\n      options={options}\n      type={type}\n      value={watch(fieldName)}\n      {...others}\n    />\n  );\n};\n\nFormField.propTypes = {\n  data: PropTypes.shape({\n    name: PropTypes.string,\n    recurring: PropTypes.bool,\n    rows: PropTypes.arrayOf(PropTypes.shape({})),\n  }).isRequired,\n  field: PropTypes.shape({\n    conditions: PropTypes.arrayOf(PropTypes.string),\n    defaultValue: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n    name: PropTypes.string,\n    required: PropTypes.string,\n    type: PropTypes.string,\n  }).isRequired,\n  fieldId: PropTypes.number.isRequired,\n  hasError: PropTypes.bool.isRequired,\n  isRecurring: PropTypes.bool.isRequired,\n  recurringIndex: PropTypes.number,\n  stepIndex: PropTypes.number.isRequired,\n  stepData: PropTypes.shape({}).isRequired,\n  rowId: PropTypes.number.isRequired,\n};\n\nFormField.defaultProps = {\n  recurringIndex: null,\n};\n","const getConditionValues = (\n  conditions,\n  watch,\n  wizardData,\n  isRecurring,\n  recurringName\n) => {\n  const name = conditions.map((c) => {\n    if (c.includes(\":\")) {\n      const [n] = c.split(\":\");\n      return n;\n    }\n    return c;\n  });\n\n  return watch(isRecurring ? [recurringName] : name, wizardData);\n};\n\nexport const checkCondition = (\n  conditions,\n  watch,\n  wizardData,\n  isRecurring,\n  recurringName,\n  recurringIndex\n) => {\n  const hasConditions = conditions && conditions.length > 0;\n  if (hasConditions) {\n    const conditionValues = getConditionValues(\n      conditions,\n      watch,\n      wizardData,\n      isRecurring,\n      recurringName\n    );\n\n    const target = isRecurring\n      ? conditionValues?.[recurringName]?.[recurringIndex]\n      : conditionValues;\n\n    if (conditionValues && target) {\n      return conditions.some((c) => {\n        if (c.includes(\":\")) {\n          const [name, value, not] = c.split(\":\");\n          const isTrue =\n            target[name] === value ||\n            (Array.isArray(value) && target[name]?.includes(value)) ||\n            (value === \"true\" && Boolean(target[name]));\n\n          if (not) return !isTrue;\n          return isTrue;\n        }\n        return target[c]?.length > 0 || !!target[c];\n      });\n    }\n  }\n  return true;\n};\n","import React, { Fragment, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled, { css } from \"styled-components\";\nimport { useFormContext } from \"react-hook-form\";\nimport {\n  Alert,\n  Divider,\n  FormRow,\n  H4,\n  Icon,\n  OutlineButton,\n  Tooltip,\n} from \"@licenserocks/kit\";\n\nimport { FormField } from \"./Field\";\nimport { checkCondition } from \"../../helpers\";\n\nconst StyledRow = styled(FormRow)`\n  && {\n    label {\n      :only-child {\n        display: none;\n      }\n    }\n  }\n\n  background-color: ${({ theme }) => theme.palette.gray.light};\n  && {\n    ${({ backgroundStyle }) =>\n      backgroundStyle === \"primary\" &&\n      css`\n        background-color: ${({ theme }) => theme.palette.common.white};\n      `}\n  }\n`;\n\nconst StyledDivider = styled(Divider)`\n  && {\n    ${({ backgroundStyle }) =>\n      backgroundStyle === \"primary\" &&\n      css`\n        background-color: ${({ theme }) => theme.palette.common.white};\n      `}\n  }\n`;\n\nconst Hint = styled.span`\n  background: #f0f0f4;\n  border-radius: 100%;\n  width: 20px;\n  height: 20px;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  margin-left: 8px;\n  vertical-align: middle;\n\n  svg {\n    color: #8685a6;\n    font-size: 10px;\n  }\n`;\n\nexport const FormRows = ({\n  data,\n  index,\n  isRecurring,\n  rows,\n  stepIndex,\n  stepData,\n  merchandise,\n}) => {\n  const { errors, watch } = useFormContext();\n  const [expanded, setExpanded] = useState(false);\n  const showExpandButton = rows?.some((row) => row.expandable);\n\n  return (\n    <>\n      {rows?.map((row, idx) => {\n        const rowKey = `step-${stepIndex}-row-${idx}`;\n        const rowErrors = [];\n        const rowConditions = checkCondition(\n          row.conditions,\n          watch,\n          stepData,\n          isRecurring,\n          data.name,\n          index\n        );\n        if (!rowConditions) return null;\n\n        if (row?.heading)\n          return <H4 content={row?.heading} px={4} mt={4} mb={2} />;\n\n        const showRow = row.expandable ? expanded : true;\n        const label = [...(row.label || [])];\n        if (row.hint)\n          label.push(\n            <Tooltip content={row.hint} contentProps={{ fontStyle: \"normal\" }}>\n              <Hint>\n                <Icon icon=\"question\" />\n              </Hint>\n            </Tooltip>\n          );\n\n        return (\n          <Fragment key={rowKey}>\n            <StyledRow\n              errors={rowErrors}\n              label={label.length > 0 ? label : null}\n              labelAlign={row.labelAlign}\n              labelGutter={row.labelGutter}\n              mb={0}\n              pb={row?.marginBottom ?? 4}\n              pt={4}\n              px={16}\n              show={showRow}\n              backgroundStyle={row?.backgroundStyle}\n            >\n              {row.message && (\n                <Alert color={row.messageColor} content={row.message} mb={2} />\n              )}\n\n              {row.fields?.map((field, fieldId) => {\n                const error =\n                  isRecurring && errors[data.name] && errors[data.name][index]\n                    ? errors[data.name][index][field.name]?.message\n                    : errors[field.name]?.message;\n\n                if (error) rowErrors.push(error);\n\n                const showIfHasCondition = checkCondition(\n                  field.conditions,\n                  watch,\n                  stepData,\n                  isRecurring,\n                  data.name,\n                  index\n                );\n                if (!showIfHasCondition) return null;\n\n                return (\n                  <FormField\n                    data={data}\n                    field={field}\n                    fieldId={fieldId}\n                    hasError={!!error}\n                    isRecurring={isRecurring}\n                    recurringIndex={index}\n                    rowId={idx}\n                    stepIndex={stepIndex}\n                    stepData={stepData}\n                    merchandise={\n                      field?.name === \"selectMerchIds\" ? merchandise : null\n                    }\n                  />\n                );\n              })}\n            </StyledRow>\n\n            {row?.divider && (\n              <StyledDivider\n                backgroundStyle={row?.backgroundStyle}\n                py={row?.dividerSize}\n                px={5}\n                m={0}\n                pb={4}\n              />\n            )}\n          </Fragment>\n        );\n      })}\n\n      {showExpandButton && (\n        <OutlineButton\n          color=\"secondary\"\n          onClick={() => setExpanded((prev) => !prev)}\n          size=\"sm\"\n        >\n          {expanded ? \"Hide Optional Params\" : \"Show Optional Params\"}\n        </OutlineButton>\n      )}\n    </>\n  );\n};\n\nFormRows.propTypes = {\n  data: PropTypes.shape({\n    name: PropTypes.string,\n    recurring: PropTypes.bool,\n    rows: PropTypes.arrayOf(PropTypes.shape({})),\n  }).isRequired,\n  stepIndex: PropTypes.number.isRequired,\n  stepData: PropTypes.shape({}).isRequired,\n  index: PropTypes.number.isRequired,\n  isRecurring: PropTypes.bool.isRequired,\n  rows: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n};\n\nFormRows.defaultProps = {};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled, { css } from \"styled-components\";\nimport { useFieldArray } from \"react-hook-form\";\nimport { Alert, Icon, OutlineButton, TextButton } from \"@licenserocks/kit\";\n\nimport { FormRows } from \"./FormRows\";\n\nconst Wrapper = styled.div`\n  padding: ${({ theme }) => theme.spacing(2, 2, 2, 6)};\n  background-color: ${({ theme }) => theme.palette.gray.light};\n  border: 1px solid ${({ theme }) => theme.palette.gray.regular};\n  border-radius: 16px;\n  margin: ${({ theme }) => theme.spacing(5)};\n\n  && {\n    ${({ disabled }) =>\n      disabled &&\n      css`\n        opacity: 0.5;\n        cursor: not-allowed !important;\n        pointer-events: none;\n      `}\n  }\n`;\n\nconst ButtonsWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  margin-bottom: 8px;\n`;\n\nconst Form = ({\n  data,\n  defaultValues,\n  stepIndex,\n  stepFormData,\n  merchandise,\n}) => {\n  const isRecurring = data.recurring;\n\n  const { fields, append, remove } = useFieldArray({\n    name: isRecurring ? data?.name : \"\",\n  });\n\n  const renderRows = (index) => (\n    <FormRows\n      data={data}\n      index={index}\n      isRecurring={isRecurring}\n      rows={data.rows}\n      stepIndex={stepIndex}\n      stepData={stepFormData}\n      merchandise={merchandise}\n    />\n  );\n\n  const renderRecurring = () => (\n    <>\n      {fields.map((item, idx) => {\n        const disabled = defaultValues?.[data.name]?.[idx]?.disabled;\n        return (\n          <Wrapper key={item.id} disabled={disabled}>\n            <ButtonsWrapper>\n              {disabled && (\n                <Alert\n                  content=\"This is a default item and can't be removed/changed.\"\n                  mr={2}\n                />\n              )}\n\n              <OutlineButton\n                color=\"danger\"\n                disabled={disabled}\n                onClick={() => remove(idx)}\n                size=\"sm\"\n              >\n                <Icon icon=\"trash\" prefix=\"fa\" />\n              </OutlineButton>\n            </ButtonsWrapper>\n\n            {renderRows(idx)}\n          </Wrapper>\n        );\n      })}\n\n      <TextButton content=\"+ Add item\" onClick={append} size=\"sm\" />\n    </>\n  );\n\n  return isRecurring ? renderRecurring() : renderRows();\n};\n\nForm.propTypes = {\n  data: PropTypes.shape({\n    name: PropTypes.string,\n    recurring: PropTypes.bool,\n    rows: PropTypes.arrayOf(PropTypes.shape({})),\n  }).isRequired,\n  stepIndex: PropTypes.number.isRequired,\n  stepFormData: PropTypes.shape({}),\n};\n\nForm.defaultProps = {\n  stepFormData: {},\n};\n\nexport default Form;\n","import {\n  faDownload,\n  faHashtag,\n  faTrash,\n} from \"@fortawesome/free-solid-svg-icons\";\n\nexport const MegaFlowIcons = {\n  faDownload,\n  faHashtag,\n  faTrash,\n};\n","import PropTypes from \"prop-types\";\n\nexport const MegaFlowPropTypes = {\n  defaultValues: PropTypes.shape({}),\n  icons: PropTypes.arrayOf(PropTypes.shape()),\n  schema: PropTypes.oneOfType([PropTypes.string, PropTypes.object]).isRequired,\n  onFinish: PropTypes.func,\n  onStepSubmit: PropTypes.func,\n  renderActionButtons: PropTypes.func,\n  theme: PropTypes.shape(),\n  watcher: PropTypes.func,\n  watchList: PropTypes.arrayOf(PropTypes.string),\n  wizardProps: PropTypes.shape(),\n  wrapperProps: PropTypes.shape(),\n};\n\nexport const MegaFlowDefaultProps = {\n  defaultValues: {},\n  icons: [],\n  onFinish: () => { },\n  renderActionButtons: () => { },\n  watchList: [],\n};\n","import React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport {\n  AppContainer,\n  RocksKitIcons,\n  RocksKitTheme,\n  Wizard,\n} from \"@licenserocks/kit\";\nimport { FormProvider, useForm } from \"react-hook-form\";\n\nimport { Form } from \"./components\";\nimport { MegaFlowIcons } from \"./theme\";\nimport { MegaFlowPropTypes, MegaFlowDefaultProps } from \"./props\";\n\nconst Wrapper = styled.div`\n  background-color: ${({ theme }) => theme.palette.gray.light};\n`;\n\nconst getOutputData = (output) =>\n  Object.values(output).reduce((obj, acc) => ({ ...obj, ...acc }), {});\n\nconst getHiddenValues = (array, key) => {\n  const initialValue = {};\n  return array.reduce((obj, item) => {\n    return {\n      ...obj,\n      [item[\"name\"]]: item?.value,\n    };\n  }, initialValue);\n};\n\nconst MegaFlow = ({\n  defaultValues,\n  icons,\n  schema,\n  onFinish,\n  onStepSubmit,\n  renderActionButtons,\n  theme,\n  watcher,\n  livePreview,\n  wizardProps,\n  wrapperProps,\n  ...props\n}) => {\n  // Parse if schema was type of JSON string\n  const parsedSchema = typeof schema === \"string\" ? JSON.parse(schema) : schema;\n\n  const { steps, hiddenValues } = parsedSchema;\n  const [currentStep, setCurrentStep] = useState(0);\n  const isCurrentLastStep = currentStep === steps.length - 1;\n  const [wizardData, setWizardData] = useState({});\n  const [hiddenData, setHiddenData] = useState({});\n  const { formState, getValues, handleSubmit, ...methods } = useForm();\n\n  const stepFormData = wizardData[currentStep] || defaultValues;\n  useEffect(() => {\n    methods.reset(stepFormData);\n    // set hidden values to include in output, without displaying\n    if (hiddenValues && currentStep === 0) {\n      setHiddenData(getHiddenValues(hiddenValues));\n    }\n    if (watcher) {\n      watcher(getOutputData(wizardData));\n    }\n  }, [currentStep]);\n\n  const onSubmit = (data) => {\n    const currentState = {\n      hiddenData,\n      ...wizardData,\n      [currentStep]: data,\n    };\n\n    // Set step data in global wizard object\n    setWizardData(currentState);\n\n    // Send step data to props\n    if (onStepSubmit) onStepSubmit(data);\n\n    if (!isCurrentLastStep) {\n      setCurrentStep((prev) => prev + 1);\n    } else {\n      onFinish(getOutputData(currentState));\n    }\n  };\n\n  const stepsArray = steps.map((st) => ({\n    title: st.title,\n  }));\n\n  const renderForm = () => (\n    <Form\n      data={steps[currentStep]}\n      key={currentStep}\n      stepIndex={currentStep}\n      stepFormData={stepFormData}\n      defaultValues={defaultValues}\n      merchandise={props.merchandise}\n    />\n  );\n\n  return (\n    <AppContainer\n      icons={{ ...RocksKitIcons, ...MegaFlowIcons, ...icons }}\n      theme={theme || RocksKitTheme()}\n    >\n      <Wrapper {...wrapperProps}>\n        <form\n          onBlur={(event) => {\n            event.preventDefault();\n            const values = getValues();\n\n            const data = Object.assign(values, hiddenData);\n            if (livePreview) {\n              livePreview(data);\n            }\n          }}\n          onSubmit={handleSubmit(onSubmit)}\n        >\n          <FormProvider {...methods}>\n            <Wizard\n              currentStepContent={renderForm()}\n              currentStepIndex={currentStep}\n              renderActionButtons={() =>\n                renderActionButtons(getOutputData(wizardData))\n              }\n              setCurrentStepIndex={setCurrentStep}\n              steps={stepsArray}\n              backgroundStyle=\"primary\"\n              {...wizardProps}\n              {...props}\n            />\n          </FormProvider>\n        </form>\n      </Wrapper>\n    </AppContainer>\n  );\n};\n\nMegaFlow.propTypes = MegaFlowPropTypes;\n\nMegaFlow.defaultProps = MegaFlowDefaultProps;\n\nexport default MegaFlow;\n"],"names":["mapFieldTypeToComponent","fieldType","FormDatepicker","Select","BorderedRadio","Checkbox","Radio","ToggleSwitch","FileUpload","FilePond","PriceField","ReactSelect","Stepper","TextArea","ItemSelect","Input","FormField","data","field","hasError","isRecurring","recurringIndex","stepIndex","fieldId","rowId","stepData","merchandise","useFormContext","control","setValue","register","watch","conditions","defaultValue","name","required","type","options","others","_excluded","React","TextButton","Field","fieldKey","fieldName","prevValue","currencies","undefined","propTypes","PropTypes","shape","string","recurring","bool","rows","arrayOf","isRequired","oneOfType","object","number","defaultProps","getConditionValues","wizardData","recurringName","map","c","includes","split","n","checkCondition","hasConditions","length","conditionValues","target","some","value","not","isTrue","Array","isArray","Boolean","StyledRow","styled","FormRow","theme","palette","gray","light","backgroundStyle","css","common","white","StyledDivider","Divider","Hint","span","FormRows","index","errors","useState","expanded","setExpanded","showExpandButton","row","expandable","idx","rowKey","rowErrors","rowConditions","heading","H4","showRow","label","hint","push","Tooltip","fontStyle","Icon","Fragment","labelAlign","labelGutter","marginBottom","message","Alert","messageColor","fields","error","showIfHasCondition","divider","dividerSize","OutlineButton","prev","Wrapper","div","spacing","regular","disabled","ButtonsWrapper","Form","defaultValues","stepFormData","useFieldArray","append","remove","renderRows","renderRecurring","item","id","MegaFlowIcons","faDownload","faHashtag","faTrash","MegaFlowPropTypes","icons","schema","onFinish","func","onStepSubmit","renderActionButtons","watcher","watchList","wizardProps","wrapperProps","MegaFlowDefaultProps","getOutputData","output","Object","values","reduce","obj","acc","getHiddenValues","array","key","initialValue","MegaFlow","livePreview","props","parsedSchema","JSON","parse","steps","hiddenValues","currentStep","setCurrentStep","isCurrentLastStep","setWizardData","hiddenData","setHiddenData","useForm","formState","getValues","handleSubmit","methods","useEffect","reset","onSubmit","currentState","stepsArray","st","title","renderForm","AppContainer","RocksKitIcons","RocksKitTheme","event","preventDefault","assign","FormProvider","Wizard"],"mappings":"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"}