{"version":3,"file":"mega-flow.es.js","sources":["../src/components/Form/Field.js","../src/components/Form/FormRows.js","../src/components/Form/Form.js","../src/theme/icons.js","../src/props.js","../src/index.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useFormContext, useWatch } from \"react-hook-form\";\nimport {\n  Alert,\n  BorderedRadio,\n  Checkbox,\n  FilePond,\n  FileUpload,\n  FormRow,\n  Input,\n  OutlineButton,\n  Radio,\n  ReactSelect,\n  Select,\n  Stepper,\n  TextArea,\n  ToggleSwitch,\n} from \"@licenserocks/kit\";\n\nconst mapFieldTypeToComponent = (fieldType) => {\n  switch (fieldType) {\n    case \"select\":\n      return Select;\n    case \"borderedRadio\":\n      return BorderedRadio;\n    case \"checkbox\":\n      return Checkbox;\n    case \"radio\":\n      return Radio;\n    case \"toggleSwitch\":\n      return ToggleSwitch;\n    case \"fileUpload\":\n      return FileUpload;\n    case \"filePond\":\n      return FilePond;\n    case \"reactSelect\":\n      return ReactSelect;\n    case \"stepper\":\n      return Stepper;\n    case \"textArea\":\n      return TextArea;\n    default:\n      return Input;\n  }\n};\n\nconst getConditionValues = (conditions, control, wizardData) => {\n  const name = conditions.map((c) => {\n    if (c.includes(\":\")) {\n      const [name] = c.split(\":\");\n      return name;\n    }\n    return c;\n  });\n  return useWatch({\n    control,\n    name,\n    defaultValue: wizardData,\n  });\n};\n\nconst checkCondition = (conditions, control, wizardData) => {\n  const hasConditions = conditions && conditions.length > 0;\n  if (hasConditions) {\n    const conditionValues = getConditionValues(conditions, control, wizardData);\n\n    return conditions.some((c) => {\n      if (c.includes(\":\")) {\n        const [name, value] = c.split(\":\");\n        return (\n          conditionValues[name] === value ||\n          conditionValues[name]?.includes(value)\n        );\n      }\n      return conditionValues[c]?.length > 0;\n    });\n  }\n  return true;\n};\n\nexport const FormField = ({\n  data,\n  field,\n  isRecurring,\n  stepIndex,\n  fieldId,\n  rowId,\n  rowErrors,\n  wizardData,\n}) => {\n  const { control, errors, register } = useFormContext();\n  const { conditions, defaultValue, name, required, type, ...others } = field;\n  const Field = mapFieldTypeToComponent(type);\n  const fieldKey = `step-${stepIndex}-row-${rowId}-field-${fieldId}`;\n  const fieldName = isRecurring ? `${data.name}[${index}].${name}` : name;\n\n  const error =\n    isRecurring && errors[data.name] && errors[data.name][index]\n      ? errors[data.name][index][name]?.message\n      : errors[name]?.message;\n  if (error) rowErrors.push(error);\n\n  const prevValue =\n    isRecurring && wizardData[data.name] && wizardData[data.name][index]\n      ? wizardData[data.name][index][name]\n      : wizardData[name];\n\n  const showIfHasCondition = checkCondition(conditions, control, wizardData);\n\n  if (!showIfHasCondition) return null;\n  return (\n    <Field\n      control={control}\n      defaultValue={prevValue || defaultValue}\n      hasError={!!error}\n      isRequired={required}\n      key={fieldKey}\n      name={fieldName}\n      register={register({\n        required,\n      })}\n      type={type}\n      {...others}\n    />\n  );\n};\n\nFormField.propTypes = {\n  data: PropTypes.shape({\n    name: PropTypes.string,\n    recurring: PropTypes.bool,\n    rows: PropTypes.arrayOf(PropTypes.shape({})),\n  }).isRequired,\n  field: PropTypes.shape({}).isRequired,\n  fieldId: PropTypes.number.isRequired,\n  isRecurring: PropTypes.bool.isRequired,\n  stepIndex: PropTypes.number.isRequired,\n  wizardData: PropTypes.shape({}).isRequired,\n  rowId: PropTypes.number.isRequired,\n  rowErrors: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n};\n\nFormField.defaultProps = {};\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useFormContext } from \"react-hook-form\";\nimport { Alert, FormRow, OutlineButton } from \"@licenserocks/kit\";\n\nimport { FormField } from \"./Field\";\n\nexport const FormRows = ({\n  data,\n  index,\n  isRecurring,\n  rows,\n  stepIndex,\n  wizardData,\n}) => {\n  const { errors } = useFormContext();\n  const [expanded, setExpanded] = useState(false);\n  const showExpandButton = rows?.some((row) => row.expandable);\n  const checkConditions = rows?.some((row) => {\n    return;\n  });\n\n  return (\n    <>\n      {rows?.map((row, idx) => {\n        const rowKey = `step-${stepIndex}-row-${idx}`;\n        const rowErrors = [];\n        const showRow = row.expandable ? expanded : true;\n\n        return (\n          <FormRow\n            errors={rowErrors}\n            key={rowKey}\n            label={row.label}\n            show={showRow}\n          >\n            {row.message && (\n              <Alert color={row.messageColor} content={row.message} mb={2} />\n            )}\n\n            {row.fields?.map((field, fieldId) => (\n              <FormField\n                data={data}\n                field={field}\n                fieldId={fieldId}\n                isRecurring={isRecurring}\n                rowId={idx}\n                rowErrors={rowErrors}\n                stepIndex={stepIndex}\n                wizardData={wizardData}\n              />\n            ))}\n          </FormRow>\n        );\n      })}\n\n      {showExpandButton && (\n        <OutlineButton\n          color=\"secondary\"\n          onClick={() => setExpanded((prev) => !prev)}\n          size=\"sm\"\n        >\n          {expanded ? \"Hide Optional Params\" : \"Show Optional Params\"}\n        </OutlineButton>\n      )}\n    </>\n  );\n};\n\nFormRows.propTypes = {\n  data: PropTypes.shape({\n    name: PropTypes.string,\n    recurring: PropTypes.bool,\n    rows: PropTypes.arrayOf(PropTypes.shape({})),\n  }).isRequired,\n  stepIndex: PropTypes.number.isRequired,\n  wizardData: PropTypes.shape({}).isRequired,\n  index: PropTypes.number.isRequired,\n  isRecurring: PropTypes.bool.isRequired,\n  rows: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n};\n\nFormRows.defaultProps = {};\n","import React, { useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled from \"styled-components\";\nimport { useFieldArray } from \"react-hook-form\";\nimport { Icon, OutlineButton, TextButton } from \"@licenserocks/kit\";\n\nimport { FormRows } from \"./FormRows\";\n\nconst Wrapper = styled.div`\n  padding: ${({ theme }) => theme.spacing(2, 2, 2, 6)};\n  background-color: ${({ theme }) => theme.palette.gray.light};\n  border: 1px solid ${({ theme }) => theme.palette.gray.regular};\n  border-radius: 16px;\n  margin-bottom: 16px;\n`;\n\nconst ButtonsWrapper = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  margin-bottom: 8px;\n`;\n\nconst Form = ({ data, stepIndex, wizardData }) => {\n  const isRecurring = data.recurring;\n\n  const { fields, append, remove } = useFieldArray({\n    name: isRecurring ? data?.name : \"\",\n  });\n\n  useEffect(() => {\n    if (fields.length === 0) {\n      append();\n    }\n  }, []);\n\n  const renderRows = (index) => (\n    <FormRows\n      data={data}\n      index={index}\n      isRecurring={isRecurring}\n      rows={data.rows}\n      stepIndex={stepIndex}\n      wizardData={wizardData}\n    />\n  );\n\n  const renderRecurring = () =>\n    fields.map((item, idx) => (\n      <Wrapper key={item.id}>\n        <ButtonsWrapper>\n          <OutlineButton\n            color=\"danger\"\n            disabled={fields.length === 1}\n            onClick={() => remove(idx)}\n            size=\"sm\"\n          >\n            <Icon icon=\"trash\" prefix=\"fa\" />\n          </OutlineButton>\n        </ButtonsWrapper>\n\n        {renderRows(idx)}\n      </Wrapper>\n    ));\n\n  return (\n    <>\n      {isRecurring ? renderRecurring() : renderRows()}\n      {isRecurring && (\n        <TextButton content=\"+ Add item\" onClick={append} size=\"sm\" />\n      )}\n    </>\n  );\n};\n\nForm.propTypes = {\n  data: PropTypes.shape({\n    name: PropTypes.string,\n    recurring: PropTypes.bool,\n    rows: PropTypes.arrayOf(PropTypes.shape({})),\n  }).isRequired,\n  stepIndex: PropTypes.number.isRequired,\n  wizardData: PropTypes.shape({}).isRequired,\n};\n\nForm.defaultProps = {};\n\nexport default Form;\n","import {\n  faDownload,\n  faHashtag,\n  faTrash,\n} from \"@fortawesome/free-solid-svg-icons\";\n\nexport const MegaFlowIcons = {\n  faDownload,\n  faHashtag,\n  faTrash,\n};\n","import PropTypes from \"prop-types\";\n\nexport const MegaFlowPropTypes = {\n  icons: PropTypes.arrayOf(PropTypes.shape()),\n  schema: PropTypes.oneOfType([PropTypes.string, PropTypes.object]).isRequired,\n  onFinish: PropTypes.func,\n  onStepSubmit: PropTypes.func,\n  theme: PropTypes.shape(),\n  wizardProps: PropTypes.shape(),\n  wrapperProps: PropTypes.shape(),\n};\n\nexport const MegaFlowDefaultProps = {\n  icons: [],\n  onFinish: () => {},\n};\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { FormProvider, useForm } from \"react-hook-form\";\nimport {\n  AppContainer,\n  RocksKitIcons,\n  RocksKitTheme,\n  Wizard,\n} from \"@licenserocks/kit\";\n\nimport { Form } from \"./components\";\nimport { MegaFlowIcons } from \"./theme\";\nimport { MegaFlowPropTypes, MegaFlowDefaultProps } from \"./props\";\n\nconst Wrapper = styled.div``;\n\nconst MegaFlow = ({\n  icons,\n  schema,\n  onFinish,\n  onStepSubmit,\n  theme,\n  wizardProps,\n  wrapperProps,\n  ...props\n}) => {\n  // Parse if schema was type of JSON string\n  const parsedSchema = typeof schema === \"string\" ? JSON.parse(schema) : schema;\n\n  const { steps } = parsedSchema;\n  const [currentStep, setCurrentStep] = useState(0);\n  const isCurrentLastStep = currentStep === steps.length - 1;\n  const [wizardData, setWizardData] = useState({});\n\n  const { handleSubmit, ...methods } = useForm({\n    defaultValues: wizardData,\n  });\n\n  const onSubmit = (data) => {\n    const currentState = {\n      ...wizardData,\n      ...data,\n    };\n    // Set step data in global wizard object\n    setWizardData(currentState);\n\n    // Send step data to props\n    if (onStepSubmit) onStepSubmit(data);\n\n    if (!isCurrentLastStep) {\n      setCurrentStep((prev) => prev + 1);\n    } else {\n      onFinish(currentState);\n    }\n  };\n\n  const stepsArray = steps.map((st) => st.title);\n\n  const renderForm = () => (\n    <Form\n      data={steps[currentStep]}\n      stepIndex={currentStep}\n      wizardData={wizardData}\n    />\n  );\n\n  return (\n    <AppContainer\n      icons={{ ...RocksKitIcons, ...MegaFlowIcons, ...icons }}\n      theme={theme || RocksKitTheme}\n    >\n      <Wrapper {...wrapperProps}>\n        <FormProvider {...methods}>\n          <form onSubmit={handleSubmit(onSubmit)}>\n            <Wizard\n              currentStepContent={renderForm()}\n              currentStepIndex={currentStep}\n              setCurrentStepIndex={setCurrentStep}\n              steps={stepsArray}\n              {...wizardProps}\n              {...props}\n            />\n          </form>\n        </FormProvider>\n      </Wrapper>\n    </AppContainer>\n  );\n};\n\nMegaFlow.propTypes = MegaFlowPropTypes;\n\nMegaFlow.defaultProps = MegaFlowDefaultProps;\n\nexport default MegaFlow;\n"],"names":["mapFieldTypeToComponent","fieldType","Select","BorderedRadio","Checkbox","Radio","ToggleSwitch","FileUpload","FilePond","ReactSelect","Stepper","TextArea","Input","getConditionValues","conditions","control","wizardData","name","map","c","includes","split","useWatch","defaultValue","checkCondition","hasConditions","length","conditionValues","some","value","FormField","data","field","isRecurring","stepIndex","fieldId","rowId","rowErrors","useFormContext","errors","register","required","type","others","Field","fieldKey","fieldName","index","error","message","push","prevValue","showIfHasCondition","propTypes","PropTypes","shape","string","recurring","bool","rows","arrayOf","isRequired","number","defaultProps","FormRows","useState","expanded","setExpanded","showExpandButton","row","expandable","checkConditions","idx","rowKey","showRow","label","messageColor","fields","prev","Wrapper","styled","div","theme","spacing","palette","gray","light","regular","ButtonsWrapper","Form","useFieldArray","append","remove","useEffect","renderRows","renderRecurring","item","id","MegaFlowIcons","faDownload","faHashtag","faTrash","MegaFlowPropTypes","icons","schema","oneOfType","object","onFinish","func","onStepSubmit","wizardProps","wrapperProps","MegaFlowDefaultProps","MegaFlow","props","parsedSchema","JSON","parse","steps","currentStep","setCurrentStep","isCurrentLastStep","setWizardData","useForm","defaultValues","handleSubmit","methods","onSubmit","currentState","stepsArray","st","title","renderForm","RocksKitIcons","RocksKitTheme"],"mappings":"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"}