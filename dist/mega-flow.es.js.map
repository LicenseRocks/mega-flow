{"version":3,"file":"mega-flow.es.js","sources":["../src/components/Form/Field.js","../src/helpers/conditions.js","../src/components/Form/FormRows.js","../src/components/Form/Form.js","../src/theme/icons.js","../src/props.js","../src/index.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Controller, useFormContext } from \"react-hook-form\";\nimport {\n  BorderedRadio,\n  Checkbox,\n  FormDatepicker,\n  FilePond,\n  FileUpload,\n  Input,\n  PriceField,\n  Radio,\n  ReactSelect,\n  Select,\n  Stepper,\n  TextArea,\n  TextButton,\n  ToggleSwitch,\n  H6,\n  Image,\n  Icon,\n  Text,\n  Modal,\n  ItemSelect,\n} from \"@licenserocks/kit\";\nimport styled, { css } from \"styled-components\";\nimport Masonry from \"react-masonry-css\";\n\nconst mapFieldTypeToComponent = (fieldType) => {\n  switch (fieldType) {\n    case \"datepicker\":\n      return FormDatepicker;\n    case \"select\":\n      return Select;\n    case \"borderedRadio\":\n      return BorderedRadio;\n    case \"checkbox\":\n      return Checkbox;\n    case \"radio\":\n      return Radio;\n    case \"toggleSwitch\":\n      return ToggleSwitch;\n    case \"fileUpload\":\n      return FileUpload;\n    case \"filePond\":\n      return FilePond;\n    case \"price\":\n      return PriceField;\n    case \"reactSelect\":\n      return ReactSelect;\n    case \"stepper\":\n      return Stepper;\n    case \"textArea\":\n      return TextArea;\n    case \"itemSelect\":\n      return ItemSelect;\n    default:\n      return Input;\n  }\n};\n\nexport const FormField = ({\n  data,\n  field,\n  hasError,\n  isRecurring,\n  recurringIndex,\n  stepIndex,\n  fieldId,\n  rowId,\n  stepData,\n  merchandise,\n}) => {\n  const { control, setValue, register } = useFormContext();\n  const {\n    conditions,\n    defaultValue,\n    name,\n    required,\n    type,\n    options,\n    ...others\n  } = field;\n\n  if (type === \"link\") return <TextButton {...others} />;\n\n  const Field = mapFieldTypeToComponent(type);\n  const fieldKey = `step-${stepIndex}-row-${rowId}-field-${fieldId}`;\n  const fieldName = isRecurring\n    ? `${data.name}[${recurringIndex}].${name}`\n    : name;\n\n  const prevValue =\n    isRecurring && stepData[data.name] && stepData[data.name][recurringIndex]\n      ? stepData[data.name][recurringIndex][name]\n      : stepData[name];\n\n  if (field?.currencies !== undefined) {\n    field.currencies = stepData?.currencies;\n  }\n\n  return (\n    <Field\n      control={control}\n      defaultValue={prevValue || defaultValue}\n      hasError={hasError}\n      isRequired={required}\n      key={fieldKey}\n      name={fieldName}\n      register={register({\n        required,\n      })}\n      setValue={setValue}\n      options={options}\n      type={type}\n      {...others}\n    />\n  );\n};\n\nFormField.propTypes = {\n  data: PropTypes.shape({\n    name: PropTypes.string,\n    recurring: PropTypes.bool,\n    rows: PropTypes.arrayOf(PropTypes.shape({})),\n  }).isRequired,\n  field: PropTypes.shape({\n    conditions: PropTypes.arrayOf(PropTypes.string),\n    defaultValue: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n    name: PropTypes.string,\n    required: PropTypes.string,\n    type: PropTypes.string,\n  }).isRequired,\n  fieldId: PropTypes.number.isRequired,\n  hasError: PropTypes.bool.isRequired,\n  isRecurring: PropTypes.bool.isRequired,\n  recurringIndex: PropTypes.number,\n  stepIndex: PropTypes.number.isRequired,\n  stepData: PropTypes.shape({}).isRequired,\n  rowId: PropTypes.number.isRequired,\n};\n\nFormField.defaultProps = {\n  recurringIndex: null,\n};\n","const getConditionValues = (\n  conditions,\n  watch,\n  wizardData,\n  isRecurring,\n  recurringName\n) => {\n  const name = conditions.map((c) => {\n    if (c.includes(\":\")) {\n      const [n] = c.split(\":\");\n      return n;\n    }\n    return c;\n  });\n\n  return watch(isRecurring ? [recurringName] : name, wizardData);\n};\n\nexport const checkCondition = (\n  conditions,\n  watch,\n  wizardData,\n  isRecurring,\n  recurringName,\n  recurringIndex\n) => {\n  const hasConditions = conditions && conditions.length > 0;\n  if (hasConditions) {\n    const conditionValues = getConditionValues(\n      conditions,\n      watch,\n      wizardData,\n      isRecurring,\n      recurringName\n    );\n\n    const target = isRecurring\n      ? conditionValues?.[recurringName]?.[recurringIndex]\n      : conditionValues;\n\n    if (conditionValues && target) {\n      return conditions.some((c) => {\n        if (c.includes(\":\")) {\n          const [name, value, not] = c.split(\":\");\n          const isTrue =\n            target[name] === value ||\n            (Array.isArray(value) && target[name]?.includes(value)) ||\n            (value === \"true\" && Boolean(target[name]));\n\n          if (not) return !isTrue;\n          return isTrue;\n        }\n        return target[c]?.length > 0 || !!target[c];\n      });\n    }\n  }\n  return true;\n};\n","import React, { Fragment, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled, { css } from \"styled-components\";\nimport { useFormContext } from \"react-hook-form\";\nimport {\n  Alert,\n  Divider,\n  FormRow,\n  H4,\n  Icon,\n  OutlineButton,\n  Tooltip,\n} from \"@licenserocks/kit\";\n\nimport { FormField } from \"./Field\";\nimport { checkCondition } from \"../../helpers\";\n\nconst StyledRow = styled(FormRow)`\n  && {\n    label {\n      :only-child {\n        display: none;\n      }\n    }\n  }\n  && {\n    ${({ backgroundStyle }) =>\n      backgroundStyle === \"primary\" &&\n      css`\n        background-color: ${({ theme }) => theme.palette.common.white};\n      `}\n  }\n`;\n\nconst StyledDivider = styled(Divider)`\n  && {\n    ${({ backgroundStyle }) =>\n      backgroundStyle === \"primary\" &&\n      css`\n        background-color: ${({ theme }) => theme.palette.common.white};\n      `}\n  }\n`;\n\nconst Hint = styled.span`\n  background: #f0f0f4;\n  border-radius: 100%;\n  width: 20px;\n  height: 20px;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  margin-left: 8px;\n  vertical-align: middle;\n\n  svg {\n    color: #8685a6;\n    font-size: 10px;\n  }\n`;\n\nexport const FormRows = ({\n  data,\n  index,\n  isRecurring,\n  rows,\n  stepIndex,\n  stepData,\n  merchandise,\n}) => {\n  const { errors, watch } = useFormContext();\n  const [expanded, setExpanded] = useState(false);\n  const showExpandButton = rows?.some((row) => row.expandable);\n\n  return (\n    <>\n      {rows?.map((row, idx) => {\n        const rowKey = `step-${stepIndex}-row-${idx}`;\n        const rowErrors = [];\n        const rowConditions = checkCondition(\n          row.conditions,\n          watch,\n          stepData,\n          isRecurring,\n          data.name,\n          index\n        );\n        if (!rowConditions) return null;\n\n        if (row?.heading)\n          return <H4 content={row?.heading} px={4} mt={4} mb={2} />;\n\n        const showRow = row.expandable ? expanded : true;\n        const label = [...(row.label || [])];\n        if (row.hint)\n          label.push(\n            <Tooltip content={row.hint} contentProps={{ fontStyle: \"normal\" }}>\n              <Hint>\n                <Icon icon=\"question\" />\n              </Hint>\n            </Tooltip>\n          );\n\n        return (\n          <Fragment key={rowKey}>\n            <StyledRow\n              errors={rowErrors}\n              label={label.length > 0 ? label : null}\n              labelAlign={row.labelAlign}\n              labelGutter={row.labelGutter}\n              mb={0}\n              pb={row?.marginBottom ?? 4}\n              pt={4}\n              px={16}\n              show={showRow}\n              backgroundStyle={row?.backgroundStyle}\n            >\n              {row.message && (\n                <Alert color={row.messageColor} content={row.message} mb={2} />\n              )}\n\n              {row.fields?.map((field, fieldId) => {\n                const error =\n                  isRecurring && errors[data.name] && errors[data.name][index]\n                    ? errors[data.name][index][field.name]?.message\n                    : errors[field.name]?.message;\n\n                if (error) rowErrors.push(error);\n\n                const showIfHasCondition = checkCondition(\n                  field.conditions,\n                  watch,\n                  stepData,\n                  isRecurring,\n                  data.name,\n                  index\n                );\n                if (!showIfHasCondition) return null;\n\n                return (\n                  <FormField\n                    data={data}\n                    field={field}\n                    fieldId={fieldId}\n                    hasError={!!error}\n                    isRecurring={isRecurring}\n                    recurringIndex={index}\n                    rowId={idx}\n                    stepIndex={stepIndex}\n                    stepData={stepData}\n                    merchandise={\n                      field?.name === \"selectMerchIds\" ? merchandise : null\n                    }\n                  />\n                );\n              })}\n            </StyledRow>\n\n            {row?.divider && (\n              <StyledDivider\n                backgroundStyle={row?.backgroundStyle}\n                py={row?.dividerSize}\n                px={5}\n                m={0}\n                pb={4}\n              />\n            )}\n          </Fragment>\n        );\n      })}\n\n      {showExpandButton && (\n        <OutlineButton\n          color=\"secondary\"\n          onClick={() => setExpanded((prev) => !prev)}\n          size=\"sm\"\n        >\n          {expanded ? \"Hide Optional Params\" : \"Show Optional Params\"}\n        </OutlineButton>\n      )}\n    </>\n  );\n};\n\nFormRows.propTypes = {\n  data: PropTypes.shape({\n    name: PropTypes.string,\n    recurring: PropTypes.bool,\n    rows: PropTypes.arrayOf(PropTypes.shape({})),\n  }).isRequired,\n  stepIndex: PropTypes.number.isRequired,\n  stepData: PropTypes.shape({}).isRequired,\n  index: PropTypes.number.isRequired,\n  isRecurring: PropTypes.bool.isRequired,\n  rows: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\n};\n\nFormRows.defaultProps = {};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled, { css } from \"styled-components\";\nimport { useFieldArray } from \"react-hook-form\";\nimport { Alert, Icon, OutlineButton, TextButton } from \"@licenserocks/kit\";\n\nimport { FormRows } from \"./FormRows\";\n\nconst Wrapper = styled.div`\n  padding: ${({ theme }) => theme.spacing(2, 2, 2, 6)};\n  background-color: ${({ theme }) => theme.palette.gray.light};\n  border: 1px solid ${({ theme }) => theme.palette.gray.regular};\n  border-radius: 16px;\n  margin: ${({ theme }) => theme.spacing(5)};\n\n  && {\n    ${({ disabled }) =>\n      disabled &&\n      css`\n        opacity: 0.5;\n        cursor: not-allowed !important;\n        pointer-events: none;\n      `}\n  }\n`;\n\nconst ButtonsWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  margin-bottom: 8px;\n`;\n\nconst Form = ({\n  data,\n  defaultValues,\n  stepIndex,\n  stepFormData,\n  merchandise,\n}) => {\n  const isRecurring = data.recurring;\n\n  const { fields, append, remove } = useFieldArray({\n    name: isRecurring ? data?.name : \"\",\n  });\n\n  const renderRows = (index) => (\n    <FormRows\n      data={data}\n      index={index}\n      isRecurring={isRecurring}\n      rows={data.rows}\n      stepIndex={stepIndex}\n      stepData={stepFormData}\n      merchandise={merchandise}\n    />\n  );\n\n  const renderRecurring = () => (\n    <>\n      {fields.map((item, idx) => {\n        const disabled = defaultValues?.[data.name]?.[idx]?.disabled;\n        return (\n          <Wrapper key={item.id} disabled={disabled}>\n            <ButtonsWrapper>\n              {disabled && (\n                <Alert\n                  content=\"This is a default item and can't be removed/changed.\"\n                  mr={2}\n                />\n              )}\n\n              <OutlineButton\n                color=\"danger\"\n                disabled={disabled}\n                onClick={() => remove(idx)}\n                size=\"sm\"\n              >\n                <Icon icon=\"trash\" prefix=\"fa\" />\n              </OutlineButton>\n            </ButtonsWrapper>\n\n            {renderRows(idx)}\n          </Wrapper>\n        );\n      })}\n\n      <TextButton content=\"+ Add item\" onClick={append} size=\"sm\" />\n    </>\n  );\n\n  return isRecurring ? renderRecurring() : renderRows();\n};\n\nForm.propTypes = {\n  data: PropTypes.shape({\n    name: PropTypes.string,\n    recurring: PropTypes.bool,\n    rows: PropTypes.arrayOf(PropTypes.shape({})),\n  }).isRequired,\n  stepIndex: PropTypes.number.isRequired,\n  stepFormData: PropTypes.shape({}),\n};\n\nForm.defaultProps = {\n  stepFormData: {},\n};\n\nexport default Form;\n","import {\n  faDownload,\n  faHashtag,\n  faTrash,\n} from \"@fortawesome/free-solid-svg-icons\";\n\nexport const MegaFlowIcons = {\n  faDownload,\n  faHashtag,\n  faTrash,\n};\n","import PropTypes from \"prop-types\";\n\nexport const MegaFlowPropTypes = {\n  defaultValues: PropTypes.shape({}),\n  icons: PropTypes.arrayOf(PropTypes.shape()),\n  schema: PropTypes.oneOfType([PropTypes.string, PropTypes.object]).isRequired,\n  onFinish: PropTypes.func,\n  onStepSubmit: PropTypes.func,\n  renderActionButtons: PropTypes.func,\n  theme: PropTypes.shape(),\n  watcher: PropTypes.func,\n  watchList: PropTypes.arrayOf(PropTypes.string),\n  wizardProps: PropTypes.shape(),\n  wrapperProps: PropTypes.shape(),\n};\n\nexport const MegaFlowDefaultProps = {\n  defaultValues: {},\n  icons: [],\n  onFinish: () => { },\n  renderActionButtons: () => { },\n  watchList: [],\n};\n","import React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport {\n  AppContainer,\n  RocksKitIcons,\n  RocksKitTheme,\n  Wizard,\n} from \"@licenserocks/kit\";\nimport { FormProvider, useForm } from \"react-hook-form\";\n\nimport { Form } from \"./components\";\nimport { MegaFlowIcons } from \"./theme\";\nimport { MegaFlowPropTypes, MegaFlowDefaultProps } from \"./props\";\n\nconst Wrapper = styled.div``;\n\nconst getOutputData = (output) =>\n  Object.values(output).reduce((obj, acc) => ({ ...obj, ...acc }), {});\n\nconst MegaFlow = ({\n  defaultValues,\n  icons,\n  schema,\n  onFinish,\n  onStepSubmit,\n  renderActionButtons,\n  theme,\n  watcher,\n  livePreview,\n  wizardProps,\n  wrapperProps,\n  ...props\n}) => {\n  // Parse if schema was type of JSON string\n  const parsedSchema = typeof schema === \"string\" ? JSON.parse(schema) : schema;\n\n  const { steps } = parsedSchema;\n  const [currentStep, setCurrentStep] = useState(0);\n  const isCurrentLastStep = currentStep === steps.length - 1;\n  const [wizardData, setWizardData] = useState({});\n  const { formState, getValues, handleSubmit, ...methods } = useForm();\n\n  const stepFormData = wizardData[currentStep] || defaultValues;\n\n  useEffect(() => {\n    methods.reset(stepFormData);\n\n    if (watcher) {\n      watcher(getOutputData(wizardData));\n    }\n  }, [currentStep]);\n\n  const onSubmit = (data) => {\n    const currentState = {\n      ...wizardData,\n      [currentStep]: data,\n    };\n    // Set step data in global wizard object\n    setWizardData(currentState);\n\n    // Send step data to props\n    if (onStepSubmit) onStepSubmit(data);\n\n    if (!isCurrentLastStep) {\n      setCurrentStep((prev) => prev + 1);\n    } else {\n      onFinish(getOutputData(currentState));\n    }\n  };\n\n  const stepsArray = steps.map((st) => ({\n    title: st.title,\n  }));\n\n  const renderForm = () => (\n    <Form\n      data={steps[currentStep]}\n      key={currentStep}\n      stepIndex={currentStep}\n      stepFormData={stepFormData}\n      defaultValues={defaultValues}\n      merchandise={props.merchandise}\n    />\n  );\n\n  return (\n    <AppContainer\n      icons={{ ...RocksKitIcons, ...MegaFlowIcons, ...icons }}\n      theme={theme || RocksKitTheme()}\n    >\n      <Wrapper {...wrapperProps}>\n        <form\n          onBlur={(event) => {\n            event.preventDefault();\n            const values = getValues();\n\n            if (livePreview) {\n              livePreview(values);\n            }\n          }}\n          onSubmit={handleSubmit(onSubmit)}\n        >\n          <FormProvider {...methods}>\n            <Wizard\n              currentStepContent={renderForm()}\n              currentStepIndex={currentStep}\n              renderActionButtons={() =>\n                renderActionButtons(getOutputData(wizardData))\n              }\n              setCurrentStepIndex={setCurrentStep}\n              steps={stepsArray}\n              backgroundStyle=\"primary\"\n              {...wizardProps}\n              {...props}\n            />\n          </FormProvider>\n        </form>\n      </Wrapper>\n    </AppContainer>\n  );\n};\n\nMegaFlow.propTypes = MegaFlowPropTypes;\n\nMegaFlow.defaultProps = MegaFlowDefaultProps;\n\nexport default MegaFlow;\n"],"names":["mapFieldTypeToComponent","fieldType","FormDatepicker","Select","BorderedRadio","Checkbox","Radio","ToggleSwitch","FileUpload","FilePond","PriceField","ReactSelect","Stepper","TextArea","ItemSelect","Input","FormField","data","field","hasError","isRecurring","recurringIndex","stepIndex","fieldId","rowId","stepData","merchandise","useFormContext","control","setValue","register","conditions","defaultValue","name","required","type","options","others","Field","fieldKey","fieldName","prevValue","currencies","undefined","propTypes","PropTypes","shape","string","recurring","bool","rows","arrayOf","isRequired","oneOfType","object","number","defaultProps","getConditionValues","watch","wizardData","recurringName","map","c","includes","split","n","checkCondition","hasConditions","length","conditionValues","target","some","value","not","isTrue","Array","isArray","Boolean","StyledRow","styled","FormRow","backgroundStyle","css","theme","palette","common","white","StyledDivider","Divider","Hint","span","FormRows","index","errors","useState","expanded","setExpanded","showExpandButton","row","expandable","idx","rowKey","rowErrors","rowConditions","heading","showRow","label","hint","push","fontStyle","labelAlign","labelGutter","marginBottom","message","messageColor","fields","error","showIfHasCondition","divider","dividerSize","prev","Wrapper","div","spacing","gray","light","regular","disabled","ButtonsWrapper","Form","defaultValues","stepFormData","useFieldArray","append","remove","renderRows","renderRecurring","item","id","MegaFlowIcons","faDownload","faHashtag","faTrash","MegaFlowPropTypes","icons","schema","onFinish","func","onStepSubmit","renderActionButtons","watcher","watchList","wizardProps","wrapperProps","MegaFlowDefaultProps","getOutputData","output","Object","values","reduce","obj","acc","MegaFlow","livePreview","props","parsedSchema","JSON","parse","steps","currentStep","setCurrentStep","isCurrentLastStep","setWizardData","useForm","formState","getValues","handleSubmit","methods","useEffect","reset","onSubmit","currentState","stepsArray","st","title","renderForm","RocksKitIcons","RocksKitTheme","event","preventDefault"],"mappings":"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"}