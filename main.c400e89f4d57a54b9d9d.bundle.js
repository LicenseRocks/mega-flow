(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{328:function(module){module.exports=JSON.parse('{"steps":[{"title":"Upload documents","rows":[{"message":"Welcome to MegaFlow. This is a message to help you through steps of this amazing workflow."},{"fields":[{"name":"documents","required":"You must upload at least 1 document","type":"fileUpload"}]}]},{"title":"Specify Software","recurring":true,"name":"softwares","rows":[{"label":"Product","fields":[{"async":true,"defaultOptions":true,"name":"product","endpoint":"https://run.mocky.io/v3/a7e06c66-251c-4ca9-a8ac-cac5284d21a0","required":"Product is required","type":"reactSelect"}]},{"label":"Amount","fields":[{"defaultValue":"1","min":"1","name":"amount","placeholder":"Amount","startIcon":"hashtag","type":"number"}]},{"label":"State","fields":[{"defaultValue":"new","name":"state","options":[{"label":"New Software","value":"new"},{"label":"Used Software","value":"used"}],"type":"radio"}]},{"label":"Download URL","expandable":true,"fields":[{"defaultValue":"https://cdn.oracle.com","name":"downloadUrl","placeholder":"Download URL","startIcon":"download","readOnly":true,"type":"input"}]}]},{"title":"Review and finalize","rows":[{"fields":[{"name":"terms","options":[{"label":"I have read and accept the terms of usage","value":true}],"required":"You must accept terms of usage","type":"checkbox"}]},{"fields":[{"name":"owner","options":[{"label":"I am the license owner or or legal representative in charge of the owner","value":true}],"required":"You must be the owner","type":"checkbox"}]}]}]}')},332:function(module,exports,__webpack_require__){__webpack_require__(333),__webpack_require__(482),__webpack_require__(483),__webpack_require__(662),module.exports=__webpack_require__(673)},399:function(module,exports){},483:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(136);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.addParameters)({options:{panelPosition:"right"}})},673:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(136);module._StorybookPreserveDecorators=!0,Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)([__webpack_require__(675)],module)}.call(this,__webpack_require__(674)(module))},675:function(module,exports,__webpack_require__){var map={"./stories.js":711};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=675},711:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"main",(function(){return main}));var react=__webpack_require__(0),react_default=__webpack_require__.n(react),helpers_extends=(__webpack_require__(35),__webpack_require__(123),__webpack_require__(42),__webpack_require__(62),__webpack_require__(292),__webpack_require__(55),__webpack_require__(676),__webpack_require__(677),__webpack_require__(52),__webpack_require__(45),__webpack_require__(4)),extends_default=__webpack_require__.n(helpers_extends),defineProperty=__webpack_require__(7),defineProperty_default=__webpack_require__.n(defineProperty),slicedToArray=__webpack_require__(30),slicedToArray_default=__webpack_require__.n(slicedToArray),styled_components_browser_esm=__webpack_require__(2),index_esm=__webpack_require__(29),rockskit_es=__webpack_require__(16),prop_types=(__webpack_require__(71),__webpack_require__(1)),prop_types_default=__webpack_require__.n(prop_types),objectWithoutProperties=(__webpack_require__(27),__webpack_require__(177),__webpack_require__(6)),objectWithoutProperties_default=__webpack_require__.n(objectWithoutProperties),FormRows=function(_ref){var data=_ref.data,index=_ref.index,isRecurring=_ref.isRecurring,rows=_ref.rows,stepIndex=_ref.stepIndex,wizardData=_ref.wizardData,_useFormContext=Object(index_esm.e)(),control=_useFormContext.control,errors=_useFormContext.errors,register=_useFormContext.register,_useState=Object(react.useState)(!1),_useState2=slicedToArray_default()(_useState,2),expanded=_useState2[0],setExpanded=_useState2[1],showExpandButton=null==rows?void 0:rows.some((function(row){return row.expandable}));return react_default.a.createElement(react_default.a.Fragment,null,null==rows?void 0:rows.map((function(row,idx){var _row$fields,rowKey="step-".concat(stepIndex,"-row-").concat(idx),rowErrors=[],showRow=!row.expandable||expanded;return react_default.a.createElement(rockskit_es.e,{errors:rowErrors,key:rowKey,label:row.label,show:showRow},row.message&&react_default.a.createElement(rockskit_es.a,{color:row.messageColor,content:row.message,style:{marginBottom:8}}),null===(_row$fields=row.fields)||void 0===_row$fields?void 0:_row$fields.map((function(_ref2,fieldId){var _errors$data$name$ind,_errors$name,defaultValue=_ref2.defaultValue,name=_ref2.name,required=_ref2.required,type=_ref2.type,field=objectWithoutProperties_default()(_ref2,["defaultValue","name","required","type"]),Field=function(fieldType){switch(fieldType){case"select":return rockskit_es.m;case"checkbox":return rockskit_es.c;case"radio":return rockskit_es.i;case"toggleSwitch":return rockskit_es.p;case"fileUpload":return rockskit_es.d;case"reactSelect":return rockskit_es.j;case"stepper":return rockskit_es.n;default:return rockskit_es.g}}(type),fieldKey="step-".concat(stepIndex,"-row-").concat(idx,"-field-").concat(fieldId),fieldName=isRecurring?"".concat(data.name,"[").concat(index,"].").concat(name):name,error=isRecurring&&errors[data.name]&&errors[data.name][index]?null===(_errors$data$name$ind=errors[data.name][index][name])||void 0===_errors$data$name$ind?void 0:_errors$data$name$ind.message:null===(_errors$name=errors[name])||void 0===_errors$name?void 0:_errors$name.message;error&&rowErrors.push(error);var prevValue=isRecurring&&wizardData[data.name]&&wizardData[data.name][index]?wizardData[data.name][index][name]:wizardData[name];return react_default.a.createElement(Field,extends_default()({control:control,defaultValue:prevValue||defaultValue,hasError:!!error,isRequired:required,key:fieldKey,name:fieldName,register:register({required:required}),type:type},field))})))})),showExpandButton&&react_default.a.createElement(rockskit_es.h,{color:"secondary",onClick:function onClick(){return setExpanded((function(prev){return!prev}))},size:"sm"},expanded?"Hide Optional Params":"Show Optional Params"))};FormRows.propTypes={data:prop_types_default.a.shape({name:prop_types_default.a.string,recurring:prop_types_default.a.bool,rows:prop_types_default.a.arrayOf(prop_types_default.a.shape({}))}).isRequired,stepIndex:prop_types_default.a.number.isRequired,wizardData:prop_types_default.a.shape({}).isRequired,index:prop_types_default.a.number.isRequired,isRecurring:prop_types_default.a.bool.isRequired,rows:prop_types_default.a.arrayOf(prop_types_default.a.shape({})).isRequired},FormRows.defaultProps={},FormRows.__docgenInfo={description:"",methods:[],displayName:"FormRows",props:{data:{type:{name:"shape",value:{name:{name:"string",required:!1},recurring:{name:"bool",required:!1},rows:{name:"arrayOf",value:{name:"shape",value:{}},required:!1}}},required:!0,description:""},stepIndex:{type:{name:"number"},required:!0,description:""},wizardData:{type:{name:"shape",value:{}},required:!0,description:""},index:{type:{name:"number"},required:!0,description:""},isRecurring:{type:{name:"bool"},required:!0,description:""},rows:{type:{name:"arrayOf",value:{name:"shape",value:{}}},required:!0,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Form/FormRows.js"]={name:"FormRows",docgenInfo:FormRows.__docgenInfo,path:"src/components/Form/FormRows.js"});var Wrapper=styled_components_browser_esm.c.div.withConfig({displayName:"Form__Wrapper",componentId:"qcwv1d-0"})(["padding:",";background-color:",";border:1px solid ",";border-radius:16px;margin-bottom:16px;"],(function(_ref){return _ref.theme.spacing(2,2,2,6)}),(function(_ref2){return _ref2.theme.palette.gray.light}),(function(_ref3){return _ref3.theme.palette.gray.regular})),ButtonsWrapper=styled_components_browser_esm.c.div.withConfig({displayName:"Form__ButtonsWrapper",componentId:"qcwv1d-1"})(["display:flex;justify-content:flex-end;margin-bottom:8px;"]),_ref5=react_default.a.createElement(rockskit_es.f,{icon:"trash",prefix:"fa"}),Form=function(_ref4){var data=_ref4.data,stepIndex=_ref4.stepIndex,wizardData=_ref4.wizardData,isRecurring=data.recurring,_useFieldArray=Object(index_esm.c)({name:isRecurring?null==data?void 0:data.name:""}),fields=_useFieldArray.fields,append=_useFieldArray.append,remove=_useFieldArray.remove;Object(react.useEffect)((function(){0===fields.length&&append()}),[]);var renderRows=function(index){return react_default.a.createElement(FormRows,{data:data,index:index,isRecurring:isRecurring,rows:data.rows,stepIndex:stepIndex,wizardData:wizardData})};return react_default.a.createElement(react_default.a.Fragment,null,isRecurring?function renderRecurring(){return fields.map((function(item,idx){return react_default.a.createElement(Wrapper,{key:item.id},react_default.a.createElement(ButtonsWrapper,null,react_default.a.createElement(rockskit_es.h,{color:"danger",disabled:1===fields.length,onClick:function onClick(){return remove(idx)},size:"sm"},_ref5)),renderRows(idx))}))}():renderRows(),isRecurring&&react_default.a.createElement(rockskit_es.o,{content:"+ Add item",onClick:append,size:"sm"}))};Form.propTypes={data:prop_types_default.a.shape({name:prop_types_default.a.string,recurring:prop_types_default.a.bool,rows:prop_types_default.a.arrayOf(prop_types_default.a.shape({}))}).isRequired,stepIndex:prop_types_default.a.number.isRequired,wizardData:prop_types_default.a.shape({}).isRequired},Form.defaultProps={},Form.__docgenInfo={description:"",methods:[],displayName:"Form",props:{data:{type:{name:"shape",value:{name:{name:"string",required:!1},recurring:{name:"bool",required:!1},rows:{name:"arrayOf",value:{name:"shape",value:{}},required:!1}}},required:!0,description:""},stepIndex:{type:{name:"number"},required:!0,description:""},wizardData:{type:{name:"shape",value:{}},required:!0,description:""}}};var Form_Form=Form;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Form/Form.js"]={name:"Form",docgenInfo:Form.__docgenInfo,path:"src/components/Form/Form.js"});var index_es=__webpack_require__(140),Icons={faDownload:index_es.a,faHashtag:index_es.b,faTrash:index_es.c},MegaFlowPropTypes={schema:prop_types_default.a.oneOfType([prop_types_default.a.string,prop_types_default.a.object]).isRequired,onFinish:prop_types_default.a.func,onStepSubmit:prop_types_default.a.func,wizardProps:prop_types_default.a.shape,wrapperProps:prop_types_default.a.shape};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}var src_Wrapper=styled_components_browser_esm.c.div.withConfig({displayName:"src__Wrapper",componentId:"rs6qhj-0"})([""]),MegaFlow=function(_ref){var schema=_ref.schema,onFinish=_ref.onFinish,onStepSubmit=_ref.onStepSubmit,wizardProps=_ref.wizardProps,wrapperProps=_ref.wrapperProps,steps=("string"==typeof schema?JSON.parse(schema):schema).steps,_useState=Object(react.useState)(0),_useState2=slicedToArray_default()(_useState,2),currentStep=_useState2[0],setCurrentStep=_useState2[1],isCurrentLastStep=currentStep===steps.length-1,_useState3=Object(react.useState)({}),_useState4=slicedToArray_default()(_useState3,2),wizardData=_useState4[0],setWizardData=_useState4[1],methods=Object(index_esm.d)({mode:"onBlur",defaultValues:wizardData}),stepsArray=steps.map((function(st){return st.title}));return react_default.a.createElement(rockskit_es.b,{icons:_objectSpread(_objectSpread({},rockskit_es.k),Icons),theme:rockskit_es.l},react_default.a.createElement(src_Wrapper,wrapperProps,react_default.a.createElement(index_esm.b,methods,react_default.a.createElement("form",{onSubmit:methods.handleSubmit((function onSubmit(data){setWizardData((function(prev){return _objectSpread(_objectSpread({},prev),data)})),onStepSubmit&&onStepSubmit(data),isCurrentLastStep?onFinish(wizardData):setCurrentStep((function(prev){return prev+1}))}))},react_default.a.createElement(rockskit_es.q,extends_default()({currentStepContent:function renderForm(){return react_default.a.createElement(Form_Form,{data:steps[currentStep],stepIndex:currentStep,wizardData:wizardData})}(),currentStepIndex:currentStep,setCurrentStepIndex:setCurrentStep,steps:stepsArray},wizardProps))))))};MegaFlow.displayName="MegaFlow",MegaFlow.propTypes=MegaFlowPropTypes,MegaFlow.defaultProps={onFinish:function onFinish(){}},MegaFlow.__docgenInfo={description:"",methods:[],displayName:"MegaFlow",composes:["./props"]};var src=MegaFlow;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/index.js"]={name:"MegaFlow",docgenInfo:MegaFlow.__docgenInfo,path:"src/index.js"});var sample=__webpack_require__(328),main=(__webpack_exports__.default={title:"MegaFlow"},function(){return react_default.a.createElement(src,{onFinish:function onFinish(){return alert("Thanks for using MegaFlow.")},schema:sample})});main.displayName="main",main.__docgenInfo={description:"",methods:[],displayName:"main"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/stories.js"]={name:"main",docgenInfo:main.__docgenInfo,path:"src/stories.js"})}},[[332,1,2]]]);
//# sourceMappingURL=main.c400e89f4d57a54b9d9d.bundle.js.map